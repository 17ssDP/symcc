# -*- Python -*-
import lit.formats.shtest

config.name = "compiler"
config.test_format = lit.formats.shtest.ShTest()
config.suffixes = [".c", ".cpp"]
config.substitutions = [
    ("%symcc", "clang -Xclang -load -Xclang '%s'" % lit_config.params["SYM_PASS"]),
    ("%symruntime", "'%s' -lz3" % lit_config.params["SYM_RUNTIME"]),
    ("%verify_o2", "clang -O2 -Xclang -disable-llvm-passes -emit-llvm -c '%s' -o - | " +
     "opt -load '%s' -symbolize -verify-each > /dev/null" % lit_config.params["SYM_PASS"]),
]
